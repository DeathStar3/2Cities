# VariCity-Config

<p align="center">
<img src="varicity/public/images/logovaricity.gif" width="200" alt="Logo"/>
</p>

**VariCity** is a 3D visualization relying on the city metaphor to display zones of high density of variability
implementations in a single system. The city is built by creating building, corresponding to classes, and streets,
grouping every class linked to the street's starting building.

**VariCity-backend** interact with the File System and combine the JSON generated by SymFinder. It also manages the saving and loading of configurations files.

**SymFinder** is a toolchain parsing a single TypeScript codebase to identify potential variability implementations.
The output of Symfinder can consist in JSON files containing information on the presence of variability implementations in the analysed codebase (e.g. if a class has been identified as a variation point or a variant, number of variants of an identified variation pointâ€¦).

## How to run the demo

The following demo will use the [Nest](https://github.com/nestjs/nest) project as an example.
1. The first step will be a variability analysis performed by Symfinder.
2. The JSONs created will automatically be sent to the VariCity-Backend
3. The VariCity-Backend will parsed all the JSONs to regroup all the metrics and node data.
5. Using the VariCity UI you will be able to visualize the city of Nest.


### General Requirements

You need a functional Docker setup to be able to run the project.

Instructions on Docker installation or on how to build the Docker images **only if you want to modify th source code** are included in the `REQUIREMENTS.md`file in this folder.

### Run VariCity-TS

The following Docker images hosted on the [Docker Hub](https://hub.docker.com/) allow to use symfinder-ts without needing to build it.

```
deathstar3/symfinder-ts-cli
deathstar3/varicity-ts
deathstar3/varicity-backend-ts
```

- First, run the varicity server:

  - On GNU/Linux

  ```
  ./run-compose.sh
  ```

- Then, in another terminal:

  - On GNU/Linux

  ```
  ./run-docker-cli.sh https://github.com/nestjs/nest -http
  ```

- Open your web browser and go to [http://localhost:8000](http://localhost:8000)
- Click on the `Project` dropdown menu. A list of the available projects appears.
![project_selection_panel](TODO)
- By clicking on the desired project's name here Nest, a pre-configured view appears in the background. You can choose the view you want by clicking on the second dropdown menu.
![view_selection_panel](TODO)
- The `dockervolume/configs` directory contains a directory for each project, containing several pre-configured views. The Nest configuration is labeled under `Varicity view - Figure 2`.
- By clicking on the view `Varicity view - Figure 2`, the city is loaded.
![Nest_visualization](TODO)
-The visualization above shows Nest with usage orientation set to OUT and usage level set to 2.

>Please note that the visualization may not be centered when appearing. The rendering time of the visualization increases with the number of buildings to display.
>To limit the loading time when switching between projects, we advise to reduce the value of the usage level to limit the number of buildings to render before switching.

## Documentation
- [Go to symfinder documentation](./symfinder/README.md)
- [Go to varicity documentation](./varicity/README.md)
- [Go to varicity-backend documentation](./varicity-backend/README.md)
