<!--
  ~ This file is part of symfinder.
  ~
  ~ symfinder is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ symfinder is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with symfinder. If not, see <http://www.gnu.org/licenses/>.
  ~
  ~ Copyright 2018-2019 Johann Mortara <johann.mortara@univ-cotedazur.fr>
  ~ Copyright 2018-2019 Xhevahire TÃ«rnava <xhevahire.ternava@lip6.fr>
  ~ Copyright 2018-2019 Philippe Collet <philippe.collet@univ-cotedazur.fr>
  -->

<!DOCTYPE html>
<!--
This is the execution context.
Loaded within the iframe.
Reloaded before every execution run.
-->
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body id="index-body">

<div class="accordion" id="accordionExample">
    <div class="card">
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" id="headingOne">
            <a class="navbar-brand" href="#">
                Symfinder
            </a>
            <h2 class="mb-0">
                <button class="btn btn-dark btn-block" id="hide-info-button" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Hide project information
                </button>
            </h2>
            <p class="badge-dark ml-auto mr-1 my-lg-0" style="font-size: 1em" id="xp-identifier">${identifier}</p>
        </nav>

        <div id="collapseOne" class="collapse show border-white" aria-labelledby="headingOne" data-parent="#accordionExample">
            <div class="card-body ">
                <div class="row py-4 pl-4">
                    <div class="input-group col-4">
                        <input id="package-to-filter" type="text" class="form-control border-dark" placeholder="Package/class to filter"
                               aria-label="Package/class to filter" aria-describedby="add-filter-button">
                        <div class="input-group-append">
                            <button class="btn btn-outline-dark" type="button" id="add-filter-button">Add new filter</button>
                        </div>
                    </div>
                    <div class="col-4">
                        <button type="button" class="btn btn-outline-dark" data-toggle="button" aria-pressed="false" id="filter-isolated" value="filter-isolated">Filter isolated nodes</button>
                    </div>
                </div>
                <div class="row py-4 pl-4 justify-content-between">
                    <div class="col-auto mr-auto">
                        <ul class="list-group" id="list-tab" role="tablist">
                        </ul>
                    </div>
                    <div class="col-4">
                        <p id="statistics"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- The scripts need to be in the body DOM element, as some test running frameworks need the body
     to have already been created so they can insert their magic into it. For example, if loaded
     before body, Angular Scenario test framework fails to find the body and crashes and burns in
     an epic manner. -->
<svg width="960" height="500"></svg>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script type="module">
    import {Graph} from "/graph.js";

    window.display = display;

    async function display(jsonFile, jsonStatsFile) {
        let filters = [];
        console.log("1");
        var visualization = new Graph(jsonFile, jsonStatsFile, filters);
        console.log(visualization);
        await visualization.displayGraph();
        return visualization;
    }

</script>
<script src="context.js"></script>
<script src="graph.js" type="module"></script>
<script src="nodes-filter.js" type="module"></script>
<script type="text/javascript">
    // Configure our Karma and set up bindings
    %CLIENT_CONFIG%
    window.__karma__.setupContext(window);

    // All served files with the latest timestamps
    %MAPPINGS%
</script>
<!-- Dynamically replaced with <script> tags -->
%SCRIPTS%
<!-- Since %SCRIPTS% might include modules, the `loaded()` call needs to be in a module too.
 This ensures all the tests will have been declared before karma tries to run them. -->
<script type="module">
    window.__karma__.loaded();
</script>
<script nomodule>
    window.__karma__.loaded();
</script>
</body>
</html>
