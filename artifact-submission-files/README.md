# Customizable Visualization of Quality Metrics for Object-Oriented Variability Implementations
## Artifact Track submission

### Johann Mortara – Philippe Collet – Anne-Marie Dery-Pinna

This artifact submission goes with the paper "Customizable Visualization of Quality Metrics for Object-Oriented Variability Implementations" accepted in the Research Track of SPLC 2022

## Artifact description TOUPDATE

The artifact consists in:
- the source code of VariMetrics, the visualization presented in the paper.
VariMetrics relies on data from symfinder, whose source code is also present in the artifact archive.
- Pre-generated source data used to generate visualizations for all 7 subject systems presented in the Table 2 of the paper and the refactored version of JFreeChart are available in the `dockervolume.zip` archive present at the root of the artifact archive.

## Availability

The artifact is available on Zenodo and accessible through the following DOI: **DOI**


## Reproducing the results presented in the paper

### A. Preparing your host system

Set up your host system according to the guidelines given in the `REQUIREMENTS.md` file.

### B. Getting the sources

1. Download the archive available at **DOI**
2. Unzip the archive. You should obtain the following hierarchy (only the files useful for the reproduction are shown):
```
varimetrics_reproduction-package/
├── build-docker-images.bat
├── build-docker-images.sh
├── data/
│   ├── argouml.yaml
│   ├── azureus.yaml
│   ├── geotools.yaml
│   ├── jdk.yaml
│   ├── jfreechart-1.5.0.yaml
│   ├── jfreechart-refactored.yaml
│   ├── jkube.yaml
│   ├── openapi-generator.yaml
│   ├── spring.yaml
│   └── symfinder.yaml
├── dockervolume.zip
├── run-compose.bat
├── run-compose-detach.sh
└── run-compose.sh
```
In the remaining of this guide, we will refer to `varimetrics_reproduction-package` as the root of the project.
For example, `/data` represents the `varimetrics_reproduction-package/data` directory.

### C. Creating the cities with VariMetrics using the pre-generated visualizations files

The files generated by symfinder and the data extracted from SonarCloud/SonarQube analysis used by VariMetrics to create the cities for the 7 projects presented in the paper are available in the `dockervolume.zip` archive.

1. Unzip the `dockervolume.zip` archive to obtain the following hierarchy (only the files useful for the reproduction are shown):
```
dockervolume/
├── configs/
|   ├── azureus/
|   │   ├── config-azureus-10.yaml
|   │   └── config-azureus-4.yaml
|   ├── geotools/
|   │   ├── config-geotools-14.yaml
|   │   └── config-geotools-5.yaml
|   ├── jdk-17.10/
|   │   ├── config-jdk-17.10-20.yaml
|   │   └── config-jdk-17.10-21.yaml
|   ├── jfreechart-1.5.0/
|   │   ├── config-jfreechart-1.5.0-17.yaml
|   │   ├── config-jfreechart-1.5.0-18.yaml
|   │   ├── config-jfreechart-1.5.0-21.yaml
|   │   ├── config-jfreechart-1.5.0-22.yaml
|   │   ├── config-jfreechart-1.5.0-3.yaml
|   │   └── config-jfreechart-1.5.0-8.yaml
|   ├── jfreechart-refactored/
|   │   ├── config-jfreechart-refactored-20.yaml
|   │   ├── config-jfreechart-refactored-22.yaml
|   │   ├── config-jfreechart-refactored-23.yaml
|   │   └── config-jfreechart-refactored-24.yaml
|   ├── jkube/
|   │   └── config-jkube-9.yaml
|   ├── openapi-generator/
|   │   └── config-openapi-generator-12.yaml
|   └── spring/
|       ├── config-spring-15.yaml
|       └── config-spring-7.yaml
├── data/
│   └── symfinder_files/
│       ├── argouml.json
│       ├── azureus.json
│       ├── externals
│       │   ├── sonarcloud
│       │   │   ├── argouml-sonarcloud.json
│       │   │   ├── azureus-sonarcloud.json
│       │   │   ├── geotools-sonarcloud.json
│       │   │   ├── jdk-17.10-sonarcloud.json
│       │   │   ├── jkube-sonarcloud.json
│       │   │   ├── openapi-generator-sonarcloud.json
│       │   │   └── spring-sonarcloud.json
│       │   └── sonarqube
│       │       ├── jfreechart-1.5.0-sonarqube.json
│       │       └── jfreechart-refactored-sonarqube.json
│       ├── geotools.json
│       ├── jdk-17.10.json
│       ├── jfreechart-1.5.0.json
│       ├── jfreechart-refactored.json
│       ├── jkube.json
│       ├── openapi-generator.json
│       ├── parsed
│       │   ├── argouml.json
│       │   ├── azureus.json
│       │   ├── geotools.json
│       │   ├── jdk-17.10.json
│       │   ├── jfreechart-1.5.0.json
│       │   ├── jfreechart-refactored.json
│       │   ├── jkube.json
│       │   ├── openapi-generator.json
│       │   └── spring.json
│       └── spring.json
└── varicitydb.json
```
2. Start VariMetrics (see the section "Running VariMetrics" of the INSTALL.md file)
3. Open your web browser and go to `http://localhost:8000`
4. On the right panel, click on `Project selection`. A list of the available projects appears.
![project_selection_panel](images/project_selection_panel.png)
5. By clicking on the desired project's name, the visualization appears on the left, here JFreeChart.
Please note that the visualization may not be centered when appearing. The rendering time of the visualization increases with the number of buildings to display.
To limit the loading time when switching between projects, we advise to reduce the value of the usage level to limit the number of buildings to render.
![jfreechart_visualization](images/jfreechart_visualization.png)
The visualization above shows JFreeChart with usage orientation set to OUT and usage level set to 4.
6. The `dockervolume/configs` directory contains a directory for each project, containing the configurations presented in Table 2 of the paper, with and without the quality metrics. JFreeChart and its refactor have extra configurations showing the camera settings presented in figures 5 to 8.
More details about the different configuration options are present in the `README.md` file present in the artifact's root directory.

### D. Generating the visualizations files with symfinder

symfinder is pre-configured to be executed on the 7 systems presented in the paper.
More details about the analyzed projects and their definition are given in the "Using symfinder on your project" section in the README present in the artifact's root directory.

To generate the visualizations files, go to the root of the project and run symfinder as detailed in the "Running symfinder" section of the `INSTALL.md` file.

*Note:* Analyzing the 7 projects with symfinder can be time consuming, especially for CXF and NetBeans which can require multiple hours of computation depending on your host system.
To obtain minimum but viable results for reproduction in a reasonable amount of time, we thus advise to analyze only small projects, like JFreeChart for example.


## Reusing VariMetrics and symfinder on other projects

Instructions to adapt symfinder and VariMetrics for your project are detailed in the sections "Using symfinder on your project" and "Configure VariMetrics for your project" in the artifact's `README.md` file.
